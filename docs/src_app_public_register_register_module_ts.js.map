{"version":3,"file":"src_app_public_register_register_module_ts.js","mappings":"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","sources":["./src/app/public/register/containers/register.component.ts","./src/app/public/register/containers/register.component.html","./src/app/public/register/register-routing.module.ts","./src/app/public/register/register.module.ts","./src/app/public/register/register.service.ts"],"sourcesContent":["import { Inject, Component, OnInit, InjectionToken } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { UntypedFormBuilder, UntypedFormControl, UntypedFormGroup, Validators } from '@angular/forms';\nimport { User } from '../../../core/models/user';\nimport { RegisterService } from '../register.service';\nimport { passwordMatchingValidator, passwordValidator } from '../../../core/validators/validators';\n\nexport const BASE_ROUTE = new InjectionToken<string[]>('BASE_ROUTE');\n\n@Component({\n  selector: 'app-register',\n  templateUrl: './register.component.html',\n  styleUrls: ['./register.component.scss']\n})\nexport class RegisterComponent implements OnInit{\n  public registerForm: UntypedFormGroup;\n  public passwordForm: UntypedFormGroup;\n\n  public constructor(\n    private _registerService: RegisterService,\n    private _router: Router,\n    @Inject(BASE_ROUTE) private baseRoute: string[],\n    private fb: UntypedFormBuilder\n  ) {\n  }\n\n  public ngOnInit() {\n    this.registerForm = this._setRegisterForm();\n  }\n\n  private _setRegisterForm() {\n    this.passwordForm = this._setPasswordForm();\n    return this.fb.group({\n      email: [null, Validators.compose([Validators.required, Validators.email])],\n      passwords: this.passwordForm,\n      name: [null, Validators.maxLength(12)],\n      age: [null, Validators.compose([Validators.min(14), Validators.max(99)])],\n      gender: null,\n    });\n  }\n\n  private _setPasswordForm(): UntypedFormGroup {\n    return new UntypedFormGroup({\n      password: new UntypedFormControl(null, [\n        Validators.required,\n        Validators.minLength(6),\n        Validators.maxLength(20),\n        passwordValidator(),\n      ]),\n      passwordConfirmation: new UntypedFormControl(null, [\n        Validators.required,\n        Validators.minLength(6),\n        Validators.maxLength(20),\n        passwordValidator(),\n      ]),\n    }, {validators: passwordMatchingValidator})\n  }\n\n  public goTo(path: string) {\n    this._router.navigate([path]);\n  }\n\n  public isValidForm(): boolean {\n    return this.registerForm.valid;\n  }\n\n  public submit() {\n    if (this.isValidForm()) {\n      this._registerService.register(this.registerForm.value).subscribe((user: User) => {\n        if (user) {\n          this.goTo(this.baseRoute.toString());\n        } else {\n          // TODO use a dialog\n          console.error('An user already exist with this email');\n        }\n      },\n        (error: any) => {\n          console.error('Error in the transaction');\n        });\n    }\n  }\n}\n","<navbar-component></navbar-component>\n<form class=\"form-contact col-lg-6 col-xl-6 offset-xl-1\" [formGroup]=\"registerForm\">\n  <div class=\"search-wrapper\">\n    <div class=\"form-group\">\n      <label for=\"name\" i18n=\"@@name\">Name</label>\n      <input type=\"text\" class=\"form-control\" id=\"name\" aria-describedby=\"name\" i18n-placeholder\n        placeholder=\"Introduce your username\" formControlName=\"name\">\n\n      <label for=\"email\">Email</label>\n      <input type=\"email\" class=\"form-control\" id=\"email\" aria-describedby=\"emailHelp\" i18n-placeholder placeholder=\"Introduce your email\"\n        formControlName=\"email\">\n      <!-- <small id=\"emailHelp\" class=\"form-text text-muted\">No compartiremos tu email con nadie</small> -->\n\n      <div [formGroup]=\"passwordForm\">\n        <label for=\"password\" i18n=\"@@password\">Password</label>\n        <input type=\"password\" class=\"form-control\" id=\"password\" i18n-placeholder placeholder=\"Introduce your password\"\n          formControlName=\"password\">\n        <details class=\"details\">\n          <small id=\"passwordHelp\" class=\"form-text text-muted\" i18n=\"@@pass_requirements\">Password must contain between 6 and 20 characters and include 1 lowercase, 1 capitalcase, 1 number and 1 special character</small>\n        </details>\n        <label for=\"passwordConfirmation\" i18n>Repit the password</label>\n        <input type=\"password\" class=\"form-control\" id=\"passwordConfirmation\" i18n-placeholder placeholder=\"Repit the password\"\n          formControlName=\"passwordConfirmation\">\n      </div>\n\n      <!-- <label for=\"age\">Edad</label>\n      <input type=\"number\" class=\"form-control\" id=\"age\" aria-describedby=\"age\" placeholder=\"Introduce tu edad\"\n        formControlName=\"age\">\n      <small id=\"ageHelp\" class=\"form-text text-muted\">Opcional</small> -->\n\n      <!-- <label for=\"age\">Sexo</label>\n      <div>\n        <input id=\"male\" type=\"radio\" value=\"male\" name=\"gender\" formControlName=\"gender\">\n        <label for=\"male\">Male</label>\n        <input id=\"female\" type=\"radio\" value=\"female\" name=\"gender\" formControlName=\"gender\">\n        <label for=\"female\">Female</label>\n        <small id=\"genderHelp\" class=\"form-text text-muted\">Opcional</small>\n      </div> -->\n    </div>\n    <div class=\"button-block\">\n      <button type=\"submit\" [disabled]=\"!isValidForm()\" class=\"button border-1 mt-3\"\n        (click)=\"submit()\" i18n>Start!</button>\n    </div>\n    <small><a href=\"javascript:void(0)\" (click)=\"goTo('login')\" class=\"nav-link\" role=\"button\" aria-haspopup=\"true\"\n      aria-expanded=\"false\" i18n>I am already registered, I want going back.</a></small>\n  </div>\n\n  <img class=\"register-img\" alt=\"login image\" src=\"assets/img/login/undraw_travelers.svg\">\n</form>\n\n<footer-component></footer-component>\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { LoginService } from 'src/app/core/login/login.service';\nimport { RegisterComponent } from './containers/register.component';\n\nconst routes: Routes = [\n  { path: '', component: RegisterComponent},\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n  providers: [LoginService]\n})\nexport class RegisterRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { SharedModule } from '../../core/shared/shared.module';\nimport { BASE_ROUTE, RegisterComponent } from './containers/register.component';\nimport { RegisterRoutingModule } from './register-routing.module';\nimport { CommonModule } from '@angular/common';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    SharedModule,\n    RegisterRoutingModule,\n    ReactiveFormsModule,\n  ],\n  declarations: [\n    RegisterComponent,\n  ],\n  exports: [],\n  providers: [\n    {provide: BASE_ROUTE, useValue: '/'},\n  ],\n})\nexport class RegisterModule {\n  constructor() {}\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { User, UserRegister } from '../../core/models/user';\nimport { Subject, Observable } from 'rxjs';\nimport { SessionService } from '../../core/session/session.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class RegisterService {\n  private readonly URL_REGISTER = 'http://localhost:3000/api/register/';\n\n  public constructor(\n    private http: HttpClient,\n    private _sessionService: SessionService,\n  ) {\n  }\n\n  public register (user: User) {\n    const $registerResponse = new Subject<User>();\n    (this.http.post(this.URL_REGISTER, user) as Observable<UserRegister>).subscribe((response: UserRegister) => {\n      if (typeof response === 'object') {\n        console.log('user registered', response.user);\n        this._sessionService.startSession(response.token);\n        $registerResponse.next(response.user);\n      } else {\n        $registerResponse.next(response);\n      }\n    }, (error: any) => {\n      $registerResponse.error(error);\n    });\n    return $registerResponse;\n  }\n}\n"],"names":["InjectionToken","UntypedFormControl","UntypedFormGroup","Validators","passwordMatchingValidator","passwordValidator","BASE_ROUTE","RegisterComponent","constructor","_registerService","_router","baseRoute","fb","ngOnInit","registerForm","_setRegisterForm","passwordForm","_setPasswordForm","group","email","compose","required","passwords","name","maxLength","age","min","max","gender","password","minLength","passwordConfirmation","validators","goTo","path","navigate","isValidForm","valid","submit","register","value","subscribe","user","toString","console","error","i0","ɵɵdirectiveInject","i1","RegisterService","i2","Router","i3","UntypedFormBuilder","selectors","decls","vars","consts","i18n_0","ngI18nClosureMode","$localize","ɵɵelement","ɵɵelementStart","ɵɵi18n","ɵɵelementEnd","ɵɵtext","ɵɵlistener","RegisterComponent_Template_button_click_21_listener","ctx","RegisterComponent_Template_a_click_24_listener","ɵɵadvance","ɵɵproperty","RouterModule","LoginService","routes","component","RegisterRoutingModule","imports","forChild","exports","ReactiveFormsModule","SharedModule","CommonModule","RegisterModule","provide","useValue","declarations","Subject","http","_sessionService","URL_REGISTER","$registerResponse","post","response","log","startSession","token","next","ɵɵinject","HttpClient","SessionService","factory","ɵfac","providedIn"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}