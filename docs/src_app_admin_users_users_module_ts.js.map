{"version":3,"file":"src_app_admin_users_users_module_ts.js","mappings":"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","sources":["./src/app/admin/users/admin-user.service.ts","./src/app/admin/users/containers/user-detail/user-detail.component.ts","./src/app/admin/users/containers/user-detail/user-detail.component.html","./src/app/admin/users/containers/users-list/users-list.component.ts","./src/app/admin/users/containers/users-list/users-list.component.html","./src/app/admin/users/users-routing.module.ts","./src/app/admin/users/users.module.ts"],"sourcesContent":["import { HttpClient, HttpErrorResponse } from \"@angular/common/http\";\nimport { Injectable } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\nimport { Observable, of } from \"rxjs\";\nimport { catchError, retry, map } from 'rxjs/operators';\nimport { User } from \"src/app/core/models/user\";\nimport { environment } from \"src/environments/environment\";\n\n@Injectable({providedIn: 'root'})\nexport class AdminUserService {\n    // TODO replace for config const\n    private readonly URL_API = environment.apiUrl + 'users/';\n    private _activeUser: User|undefined;\n\n    constructor(\n        private _http: HttpClient,\n        private _router: Router,\n    ) {    }\n\n    public get activeUser(): User|undefined {\n        return this._activeUser;\n    }\n    public set activeUser(value: User|undefined) {\n        this._activeUser = value;\n    }\n\n    public getUser(id: string): Observable<User> {\n        return this._http.get(this.URL_API + id).pipe(\n          retry(3),\n          map(res => {\n            if (!res) {\n              throw new Error('User not found');\n            }\n            return res;\n          })\n        ) as Observable<User>;\n      } \n\n    public getUsers(): Observable<User[]> {\n        return this._http.get(this.URL_API).pipe(\n          retry(3),\n          map(res => {\n            if (!res) {\n              throw new Error('there were not found users!');\n            }\n            return res;\n          }),\n          catchError((err: any) => {\n            console.log(err.message);\n            if (err instanceof HttpErrorResponse) {\n              if (err.status === 401 || err.status === 500) {\n                console.log('unauthorized request');\n                this._router.navigate(['/login'])\n              }\n            }\n            return of([])\n          })\n        ) as Observable<User[]>;\n      }\n\n    public addUser(user: User): Observable<any> {\n        return this._http.post(this.URL_API, user).pipe(\n            retry(3),\n            map(res => {\n            if (!res) {\n                throw new Error('User couldnt get added');\n            }\n            return res;\n            })\n        ) as Observable<any>;\n    }\n    \n    public updateUser(user: User): Observable<any> {\n        return this._http.put(this.URL_API + user._id, user).pipe(\n            retry(3),\n            map(res => {\n            if (!res) {\n                throw new Error('User couldnt get updated');\n            }\n            return res;\n            })\n        ) as Observable<any>;\n    }\n    \n    public deleteUser(id: string): Observable<any> {\n        return this._http.delete(this.URL_API + id).pipe(\n            retry(3),\n            map(res => {\n            if (!res) {\n                throw new Error('User couldnt get deleted');\n            }\n            return res;\n            })\n        ) as Observable<any>;\n    }\n}","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-user-detail',\n  templateUrl: './user-detail.component.html',\n  // styleUrls: ['./user-detail.component.scss']\n})\nexport class UserDetailComponent implements OnInit {\n  constructor() {}\n\n  ngOnInit() {}\n}\n","<h1>Detalles de un usuario</h1>\n","import { Component, ChangeDetectorRef, OnInit } from '@angular/core';\nimport { UntypedFormBuilder, UntypedFormGroup } from '@angular/forms';\nimport { User } from '../../../../core/models/user';\nimport { AdminUserService } from '../../admin-user.service';\n\n@Component({\n  selector: 'app-users-list',\n  templateUrl: './users-list.component.html',\n})\nexport class UsersListComponent implements OnInit {\n  public result: any;\n  public usersForm: UntypedFormGroup;\n\n  constructor(\n    private _userService: AdminUserService,\n    private readonly _changeDetector: ChangeDetectorRef,\n    private _fb: UntypedFormBuilder,\n  ) {}\n\n  ngOnInit() {\n    this.usersForm = this._fb.group({\n      userId: null,\n    });\n  }\n\n  // **************** Just for testing *************\n  public getUsers() {\n    this._userService.getUsers().subscribe((userList: User[]) => {\n      this.result = JSON.stringify(userList);\n      this._changeDetector.detectChanges();\n    }, (error) => {\n      // TODO replace for a info message\n      console.error(error);\n    });\n  }\n\n  public getUser() {\n    this._userService.getUser(this.usersForm.controls.userId.value).subscribe((user: User) => {\n      this.result = JSON.stringify(user);\n      this._changeDetector.detectChanges();\n    }, (error) => {\n      // TODO replace for a info message\n      console.error(error);\n    });\n  }\n\n  public addUser() {\n    this._userService.addUser({\n      address: {\n        country: undefined,\n        city: undefined,\n        street: undefined,\n        number: undefined,\n        postCode: undefined,\n        coordinates: undefined,\n      },\n      admin: false,\n      age: 20,\n      email: 'paco@paco.com',\n      joiningDate: new Date(),\n      name: 'paco',\n      password: '1234',\n    }).subscribe((user: User) => {\n      this.result = user;\n      this._changeDetector.detectChanges();\n    }, (error) => {\n      // TODO replace for a info message\n      console.error(error);\n    });\n  }\n\n  public updateUser() {\n    this._userService.getUser(this.usersForm.controls.userId.value).subscribe((user: User) => {\n      this.result = JSON.stringify(user);\n      this._changeDetector.detectChanges();\n    }, (error) => {\n      // TODO replace for a info message\n      console.error(error);\n    });\n  }\n\n  public deleteUser() {\n    this._userService.deleteUser(this.usersForm.controls.userId.value).subscribe((response: any) => {\n      this.result = JSON.stringify(response);\n      this.getUsers();\n    }, (error) => {\n      // TODO replace for a info message\n      console.error(error);\n    });\n  }\n  // **************** End of methods for testing *************\n}\n","<form [formGroup]=\"usersForm\">\n\n  <input type=\"text\" class=\"form-control\" id=\"userId\" formControlName=\"userId\" name=\"userId\">\n\n  <button (click)=\"getUsers()\">Get users</button>\n  <button (click)=\"getUser()\">Get user</button>\n  <button (click)=\"addUser()\">add user</button>\n  <button (click)=\"updateUser()\">update user</button>\n  <button (click)=\"deleteUser()\">delete user</button>\n\n  <code>\n    {{result}}\n  </code>\n</form>\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { UsersListComponent } from './containers/users-list/users-list.component';\n\n// Root routes of this particular module: USERS.\nconst routes: Routes = [\n  { path: '',  component: UsersListComponent},\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class UsersRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { SharedModule } from '../../core/shared/shared.module';\nimport { UsersRoutingModule } from './users-routing.module';\nimport { UsersListComponent } from './containers/users-list/users-list.component';\nimport { UserDetailComponent } from './containers/user-detail/user-detail.component';\nimport { ReactiveFormsModule } from '@angular/forms';\n\n@NgModule({\n\n  imports: [\n    // Angular\n    SharedModule,\n    UsersRoutingModule,\n    ReactiveFormsModule,\n  ],\n  declarations: [\n    UsersListComponent,\n    UserDetailComponent,\n  ],\n  exports: [],\n  providers: [],\n})\nexport class UsersModule {\n  constructor() {}\n}\n"],"names":["HttpErrorResponse","of","catchError","retry","map","environment","AdminUserService","constructor","_http","_router","URL_API","apiUrl","activeUser","_activeUser","value","getUser","id","get","pipe","res","Error","getUsers","err","console","log","message","status","navigate","addUser","user","post","updateUser","put","_id","deleteUser","delete","i0","ɵɵinject","i1","HttpClient","i2","Router","factory","ɵfac","providedIn","UserDetailComponent","ngOnInit","selectors","decls","vars","template","UserDetailComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","UsersListComponent","_userService","_changeDetector","_fb","usersForm","group","userId","subscribe","userList","result","JSON","stringify","detectChanges","error","controls","address","country","undefined","city","street","number","postCode","coordinates","admin","age","email","joiningDate","Date","name","password","response","ɵɵdirectiveInject","ChangeDetectorRef","UntypedFormBuilder","consts","UsersListComponent_Template","ɵɵelement","ɵɵlistener","UsersListComponent_Template_button_click_2_listener","UsersListComponent_Template_button_click_4_listener","UsersListComponent_Template_button_click_6_listener","UsersListComponent_Template_button_click_8_listener","UsersListComponent_Template_button_click_10_listener","ɵɵproperty","ɵɵadvance","ɵɵtextInterpolate1","RouterModule","routes","path","component","UsersRoutingModule","forChild","imports","exports","SharedModule","ReactiveFormsModule","UsersModule","declarations"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}