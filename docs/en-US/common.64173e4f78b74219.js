"use strict";(self.webpackChunkmy_suitcase=self.webpackChunkmy_suitcase||[]).push([[592],{4166:(A,E,t)=>{t.d(E,{G:()=>i,j:()=>n});const i={MAX_SUITCASES_REACHED:"maxSuitcasesReached",POP_UPS_BLOCKED:"NotAllowedError",WRONG_PASSWORD:"wrongPassword",EXISTING_EMAIL:"existingEmail",USER_NOT_FOUND:"userNotFound"},n={MAX_SUITCASES_REACHED:{title:"Error",message:"You have reached the maximum number of suitcases"},POP_UPS_BLOCKED:{title:"Error",message:"Please, make sure that you have enabled pop ups in your browser. You could check it in both the navigation bar and the browser configuration"},WRONG_PASSWORD:{title:"Wrong username or password",message:"The username, the password or both are wrong. Please make sure that both fields are right"},EXISTING_EMAIL:{title:"The email already exists",message:"The email that you are trying to introduce already exists in our database, please if its yours and you dont remember the password, click into the remember password button in the login area"},USER_NOT_FOUND:{title:"The username or the password are wrong",message:"The username or the password are wrong"}}},1543:(A,E,t)=>{t.d(E,{b:()=>i,v:()=>n});const i={NOTIFICATIONS_DISABLED:"NotificationsNotEnabled"},n={GENERAL_ERROR:{title:"Error",message:"There has been a problem, please try again and if the problem persist contact us"},NOTIFICATIONS_DISABLED:{title:"Error",message:"Notifications are not enabled for this device"}}},2703:(A,E,t)=>{t.d(E,{K:()=>i});const i={CONFIRMATION_REMOVE_NOTIFICATION:{title:"\xA1Warning!",message:"Are you sure that you want to continue and remove the notification?"},CONFIRMATION_SEND_NOTIFICATION:{title:"\xA1Warning!",message:"Are you sure that you want to continue and send the notification to all the subscribers?"},CONFIRMATION_REMOVED_NOTIFICATION:{title:"The notification has been successfully removed",message:""}}},4973:(A,E,t)=>{t.d(E,{Q:()=>c});var i=t(5879),n=t(1508),l=t(8006);let c=(()=>{class a{constructor(r,u){this._loginService=r,this._router=u}canActivate(r,u){this.lastIntendedTargetRoute=u.url;const g=this._loginService.isLoggedIn();return g||this._router.navigate(["/login"]),g}canActivateChild(){const r=this._loginService.isLoggedIn();return r||this._router.navigate(["/login"]),r}}return a.\u0275fac=function(r){return new(r||a)(i.LFG(n.r),i.LFG(l.F0))},a.\u0275prov=i.Yz7({token:a,factory:a.\u0275fac}),a})()},5319:(A,E,t)=>{t.d(E,{N:()=>u});var i=t(9193),n=t(6124),l=t(2413),c=t(5879),a=t(3934),s=t(1508),r=t(8006);let u=(()=>{class g{constructor(O,h,e){this._userService=O,this._loginService=h,this._router=e}canActivate(O,h){if(this.lastIntendedTargetRoute=h.url,this._loginService.isLoggedIn()){if(!this._userService.activeUser)return this._loginService.recoverActiveUser().pipe((0,n.U)(e=>e?this._checkAdminUser(e):(this._router.navigate(["/login"]),!1)),(0,l.K)(()=>(this._router.navigate(["/login"]),(0,i.of)(!1))));if(this._checkAdminUser(this._userService.activeUser))return!0}return!1}_checkAdminUser(O){return this._userService.activeUser&&this._userService.activeUser.admin}canActivateChild(){return!(!this._userService.activeUser||!this._userService.activeUser.admin)||(this._router.navigate(["/login"]),!1)}}return g.\u0275fac=function(O){return new(O||g)(c.LFG(a.K),c.LFG(s.r),c.LFG(r.F0))},g.\u0275prov=c.Yz7({token:g,factory:g.\u0275fac}),g})()},1508:(A,E,t)=>{t.d(E,{r:()=>O});var i=t(5125),n=t(2079),l=t(6406),c=t(6124),a=t(553),s=t(5879),r=t(9862),u=t(8006),g=t(930),m=t(3934);let O=(()=>{class h{constructor(_,o,d,S){this._http=_,this._router=o,this._sessionService=d,this._userService=S,this.URL_API=a.N.apiUrl+"users/",this.URL_CHECK_EXISTING_USER=a.N.apiUrl+"login/",this.logged$=new i.X(void 0),this._sessionService.logout$.subscribe(()=>{this.logout()})}login(_){const o=new n.xQ;return this._http.post(this.URL_CHECK_EXISTING_USER,_).subscribe(d=>{if("object"==typeof d){console.log("user logged",d.user),this._userService.activeUser=d.user;const S=_.keepSession?localStorage:sessionStorage;this._sessionService.setStorageMethod(S),this._sessionService.startSession(d.token),o.next(d.user),this.logged$.next(d.user)}else o.next(d),this.logged$.next(d)},d=>{o.error(d)}),o}recoverActiveUser(){const _=new n.xQ;return this.getUser(this._sessionService.getIdToken()).subscribe(o=>{this._userService.activeUser=o,_.next(this._userService.activeUser)},o=>{401==o.status&&this._sessionService.removeToken(),console.log(o),_.error(o)}),_}isLoggedIn(){return this._sessionService._isThereActiveUser()}getUser(_){return this._http.get(this.URL_API+_).pipe((0,l.X)(3),(0,c.U)(o=>{if(!o)throw new Error("User not found");return o}))}logout(){this._userService.activeUser=void 0,this._sessionService.removeToken(!0),this._sessionService.stopInterval(),this.logged$.next(void 0),this._router.navigate(["home"])}}return h.\u0275fac=function(_){return new(_||h)(s.LFG(r.eN),s.LFG(u.F0),s.LFG(g.m),s.LFG(m.K))},h.\u0275prov=s.Yz7({token:h,factory:h.\u0275fac}),h})()},3934:(A,E,t)=>{t.d(E,{K:()=>n});var i=t(5879);let n=(()=>{class l{constructor(){}get activeUser(){return this._activeUser}set activeUser(a){this._activeUser=a}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275prov=i.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},8185:(A,E,t)=>{t.d(E,{_:()=>a});var i=t(6814),n=t(9347),l=t(930),c=t(5879);let a=(()=>{class s{constructor(u){if(u)throw new Error("SessionModule is already loaded. Import it in the PublicModule or AdminModule only")}static forRoot(u){return{ngModule:s,providers:[l.m,{provide:l.F,useValue:u}]}}static forChild(u){return{ngModule:s,providers:[l.m,{provide:l.F,useValue:u}]}}}return s.\u0275fac=function(u){return new(u||s)(c.LFG(s,12))},s.\u0275mod=c.oAB({type:s}),s.\u0275inj=c.cJS({providers:[{provide:n.Bq,useValue:{hasBackdrop:!0}}],imports:[i.ez,n.Is]}),s})()},6133:(A,E,t)=>{t.d(E,{e:()=>c});var i=t(5879),n=t(930),l=t(9347);let c=(()=>{class a{constructor(r){this.sessionService=r}}return a.\u0275fac=function(r){return new(r||a)(i.Y36(n.m))},a.\u0275cmp=i.Xpm({type:a,selectors:[["my-suitcase-timeout-dialog"]],decls:14,vars:1,consts:function(){let s,r,u,g,m;return s="The session is about to expire",r="The session is going to expire in ",u="seconds",g="Logout",m="Stay",[["mat-dialog-title",""],s,[1,"mat-typography"],r,u,["align","end"],["mat-button","","color","warn"],g,["mat-button","","mat-dialog-close","true","cdkFocusInitial","","color","primary"],m]},template:function(r,u){1&r&&(i.TgZ(0,"h2",0),i.SDv(1,1),i.qZA(),i.TgZ(2,"mat-dialog-content",2)(3,"p")(4,"span"),i.SDv(5,3),i.qZA(),i._uU(6),i.TgZ(7,"span"),i.SDv(8,4),i.qZA()()(),i.TgZ(9,"mat-dialog-actions",5)(10,"button",6),i.SDv(11,7),i.qZA(),i.TgZ(12,"button",8),i.SDv(13,9),i.qZA()()),2&r&&(i.xp6(6),i.hij(" ",u.sessionService.sessionSeconds," "))},dependencies:[l.ZT,l.uh,l.xY,l.H8],encapsulation:2}),a})()},3601:(A,E,t)=>{t.d(E,{W:()=>l});var i=t(9347),n=t(5879);let l=(()=>{class c{constructor(s,r){this.dialogRef=s,this.data=r}ngOnInit(){this.title=this.data.title,this.message=this.data.message}}return c.\u0275fac=function(s){return new(s||c)(n.Y36(i.so),n.Y36(i.WI))},c.\u0275cmp=n.Xpm({type:c,selectors:[["app-info-dialog"]],decls:10,vars:2,consts:function(){let a,s;return a="Ok",s="Cancel",[["mat-dialog-title",""],[1,"mat-typography"],["align","end"],["mat-button","","mat-dialog-close","true","cdkFocusInitial","","color","basic",1,"button","border-1","mt-3"],a,["mat-button","","mat-dialog-close","false","cdkFocusInitial","","color","basic",1,"button","border-1","mt-3"],s]},template:function(s,r){1&s&&(n.TgZ(0,"h2",0),n._uU(1),n.qZA(),n.TgZ(2,"mat-dialog-content",1)(3,"p"),n._uU(4),n.qZA()(),n.TgZ(5,"mat-dialog-actions",2)(6,"button",3),n.SDv(7,4),n.qZA(),n.TgZ(8,"button",5),n.SDv(9,6),n.qZA()()),2&s&&(n.xp6(1),n.Oqu(r.title),n.xp6(3),n.Oqu(r.message))},dependencies:[i.ZT,i.uh,i.xY,i.H8],encapsulation:2}),c})()},8525:(A,E,t)=>{t.d(E,{Y:()=>l,y:()=>n});const i=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[-!#$%{}()*+,.:;|?@_])[A-Za-z\d-!#$%{}()*+,.:;|?@_]{6,20}$/;function n(){return c=>i.test(c.value)?null:{forbiddenPassword:{value:c.value}}}const l=c=>{const a=c.get("password"),s=c.get("passwordConfirmation");return a&&s&&a.value!==s.value?{notMatchingPasswords:!0}:null}},6406:(A,E,t)=>{t.d(E,{X:()=>n});var i=t(254);function n(a=-1){return s=>s.lift(new l(a,s))}class l{constructor(s,r){this.count=s,this.source=r}call(s,r){return r.subscribe(new c(s,this.count,this.source))}}class c extends i.L{constructor(s,r,u){super(s),this.count=r,this.source=u}error(s){if(!this.isStopped){const{source:r,count:u}=this;if(0===u)return super.error(s);u>-1&&(this.count=u-1),r.subscribe(this._unsubscribeAndRecycle())}}}},8337:(A,E,t)=>{t.d(E,{A8:()=>m,Z9:()=>c,eX:()=>r,k:()=>O,yy:()=>s});var i=t(4247),n=t(5879);function c(h){return h&&"function"==typeof h.connect&&!(h instanceof i.c)}class s{applyChanges(e,_,o,d,S){e.forEachOperation((T,C,f)=>{let I,M;if(null==T.previousIndex){const v=o(T,C,f);I=_.createEmbeddedView(v.templateRef,v.context,v.index),M=1}else null==f?(_.remove(C),M=3):(I=_.get(C),_.move(I,f),M=2);S&&S({context:I?.context,operation:M,record:T})})}detach(){}}class r{constructor(){this.viewCacheSize=20,this._viewCache=[]}applyChanges(e,_,o,d,S){e.forEachOperation((T,C,f)=>{let I,M;null==T.previousIndex?(I=this._insertView(()=>o(T,C,f),f,_,d(T)),M=I?1:0):null==f?(this._detachAndCacheView(C,_),M=3):(I=this._moveView(C,f,_,d(T)),M=2),S&&S({context:I?.context,operation:M,record:T})})}detach(){for(const e of this._viewCache)e.destroy();this._viewCache=[]}_insertView(e,_,o,d){const S=this._insertViewFromCache(_,o);if(S)return void(S.context.$implicit=d);const T=e();return o.createEmbeddedView(T.templateRef,T.context,T.index)}_detachAndCacheView(e,_){const o=_.detach(e);this._maybeCacheView(o,_)}_moveView(e,_,o,d){const S=o.get(e);return o.move(S,_),S.context.$implicit=d,S}_maybeCacheView(e,_){if(this._viewCache.length<this.viewCacheSize)this._viewCache.push(e);else{const o=_.indexOf(e);-1===o?e.destroy():_.remove(o)}}_insertViewFromCache(e,_){const o=this._viewCache.pop();return o&&_.insert(o,e),o||null}}let m=(()=>{class h{constructor(){this._listeners=[]}notify(_,o){for(let d of this._listeners)d(_,o)}listen(_){return this._listeners.push(_),()=>{this._listeners=this._listeners.filter(o=>_!==o)}}ngOnDestroy(){this._listeners=[]}}return h.\u0275fac=function(_){return new(_||h)},h.\u0275prov=n.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})();const O=new n.OlP("_ViewRepeater")}}]);